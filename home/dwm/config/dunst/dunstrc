# ============================================
# Dunst - Modern Glass Look (Catppuccin Mocha)
# ============================================
# 设计要点：
# 1) 伪透明关闭（transparency=0），半透明/磨砂交给 picom 的 rules；
# 2) 统一留白、细边框、柔和圆角、分隔线，信息密度适中；
# 3) 标题加粗，正文自动换行；存在进度时显示 %p；
# 4) 仅使用 dunst 支持的键名，避免告警。

[global]
    # ── 显示位置 ─────────────────────────────────
    monitor = 0
    follow = mouse                  # 通知出现在鼠标附近（mouse/keyboard/none）
    origin = top-right
    offset = (20, 40)               # 与屏幕右上角的偏移
    gap_size = 8                    # 多条通知之间的间距
    notification_limit = 5          # 同屏最大通知数

    # ── 尺寸与留白 ───────────────────────────────
    width = (300, 420)              # 最小/最大宽度
    height = (0, 300)               # 每条通知最大高度
    padding = 14
    horizontal_padding = 14
    line_height = 0                 # 0=自动
    corner_radius = 10
    separator_height = 2
    separator_color = frame         # 分隔线颜色跟边框一致

    # ── 外观（透明、边框） ───────────────────────
    transparency = 0                # 交给 picom 做半透明+模糊
    frame_width = 2
    frame_color = "#313244"         # 深灰细边框，低饱和不刺眼

    # ── 字体与文本 ───────────────────────────────
    font = JetBrainsMono Nerd Font 10
    markup = full                   # 启用 Pango 标记（<b> 等）
    # %s: summary(标题)  %b: body(正文)  %p: 进度（存在时显示，如 37%）
    format = "<b>%s</b>\n%b%p"
    alignment = left
    ellipsize = middle              # 中间省略，保留前后关键信息
    word_wrap = yes
    ignore_newline = no

    # ── 行为与历史 ───────────────────────────────
    show_age_threshold = 60         # >60s 显示相对时间
    stack_duplicates = true         # 相同通知堆叠
    hide_duplicate_count = true     # 隐藏 (xN) 计数泡泡
    history_length = 50
    indicate_hidden = yes           # 有被隐藏的通知时给出提示

    # ── 图标 ─────────────────────────────────────
    enable_recursive_icon_lookup = true
    icon_position = left
    max_icon_size = 48
    icon_path = /usr/share/icons/Adwaita/32x32/actions:/usr/share/icons/Adwaita/32x32/status

    # ── 点击动作 ─────────────────────────────────
    mouse_left_click   = close_current
    mouse_middle_click = do_action, close_current
    mouse_right_click  = close_all

    # ── 外部程序 ─────────────────────────────────
    browser = xdg-open
    dmenu   = rofi -dmenu -p dunst  # 用 rofi 作为动作选择器

    # ── 脚本钩子（可选，不需要可注释） ───────────
    script = dunst_notify_hook.sh
    always_run_script = true

    # ── 进度条（仅用 dunst 支持的键） ─────────────
    progress_bar = true
    progress_bar_height = 6
    progress_bar_min_width = 120
    progress_bar_max_width = 280
    progress_bar_corner_radius = 3   # ≤ height/2，否则会被夹到一半
    progress_bar_frame_width = 0     # 无边框更干净

    # ── 其他偏好 ─────────────────────────────────
    show_indicators = yes            # 小箭头等指示

# ─────────────────────────────────────────────
# 低/中/高 三档紧急级别（Catppuccin Mocha）
# ─────────────────────────────────────────────
[urgency_low]
    background = "#1e1e2e"          # 暗底
    foreground = "#cdd6f4"          # 明亮文字
    frame_color = "#313244"
    timeout = 4

[urgency_normal]
    background = "#1e1e2e"
    foreground = "#cdd6f4"
    frame_color = "#313244"
    timeout = 8

[urgency_critical]
    background = "#1e1e2e"
    foreground = "#f38ba8"          # 强调色
    frame_color = "#f38ba8"
    timeout = 0                     # 不自动消失（需手动关闭）

# ─────────────────────────────────────────────
# 可选：按应用/类别细化（示例，默认注释）
# ─────────────────────────────────────────────
# [spotify]
#     appname = "Spotify"
#     urgency = low

# [systemd]
#     appname = "systemd"
#     timeout = 6

# [screenshot]
#     summary = "Screenshot saved"
#     urgency = normal
#     timeout = 3

